<mat-card class="sell-form-card">
  <mat-card-title>Fahrzeug zum Verkauf eintragen</mat-card-title>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="fill">
      <mat-label>Fahrzeugname</mat-label>
      <input matInput formControlName="name" required placeholder="Fahrzeugname eingeben" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Bild-URL</mat-label>
      <input matInput formControlName="image" required placeholder="Link zum Fahrzeugbild" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Preis</mat-label>
      <input matInput type="number" formControlName="price" required placeholder="Preis in CHF" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Baujahr</mat-label>
      <input
        matInput
        type="number"
        formControlName="year"
        required
        placeholder="Baujahr z.B. 2020"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Kilometerstand</mat-label>
      <input
        matInput
        type="number"
        formControlName="mileage"
        required
        placeholder="Kilometerstand z.B. 100000"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Zustand</mat-label>
      <input matInput formControlName="condition" placeholder="z. B. Gebraucht, Neu" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Fahrzeughistorie</mat-label>
      <textarea
        matInput
        formControlName="vehicleHistory"
        placeholder="Kurze Beschreibung oder Historie"
      ></textarea>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Marke</mat-label>
      <mat-select formControlName="brandsId" required>
        @for (brand of brands; track brand.id) {
          <mat-option [value]="brand.id">{{ brand.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Farbe</mat-label>
      <mat-select formControlName="colorsId" required>
        @for (color of colors; track color.id) {
          <mat-option [value]="color.id">{{ color.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Typ</mat-label>
      <mat-select formControlName="typesId" required>
        @for (type of types; track type.id) {
          <mat-option [value]="type.id">{{ type.type }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-divider></mat-divider>
    <h3>Technische Spezifikationen</h3>

    <div [formGroup]="specsForm">
      <mat-form-field appearance="fill">
        <mat-label>Leistung (kW)</mat-label>
        <input matInput type="number" formControlName="powerKw" required placeholder="z.B. 100" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Leistung (PS)</mat-label>
        <input matInput type="number" formControlName="powerPs" required placeholder="z.B. 136" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Länge (mm)</mat-label>
        <input
          matInput
          type="number"
          formControlName="lengthMillimeter"
          required
          placeholder="z.B. 4500"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Breite (mm)</mat-label>
        <input
          matInput
          type="number"
          formControlName="widthMillimeter"
          required
          placeholder="z.B. 1800"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Höhe (mm)</mat-label>
        <input
          matInput
          type="number"
          formControlName="heightMillimeter"
          required
          placeholder="z.B. 1400"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Kofferraumvolumen min (l)</mat-label>
        <input
          matInput
          type="number"
          formControlName="trunkInLiterMin"
          required
          placeholder="z.B. 350"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Kofferraumvolumen max (l)</mat-label>
        <input
          matInput
          type="number"
          formControlName="trunkInLiterMax"
          required
          placeholder="z.B. 1200"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>0–100 km/h (s)</mat-label>
        <input
          matInput
          type="number"
          formControlName="zeroToHundredInSeconds"
          required
          placeholder="z.B. 9.8"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Vmax (km/h)</mat-label>
        <input
          matInput
          type="number"
          formControlName="topSpeedInKmh"
          required
          placeholder="z.B. 190"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Verbrauch/100km</mat-label>
        <input
          matInput
          type="number"
          formControlName="consumptionHundredInX"
          required
          placeholder="z.B. 6.5"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>CO₂-Emissionen (g/km)</mat-label>
        <input
          matInput
          type="number"
          formControlName="coTwoEmissionInGPerKm"
          required
          placeholder="z.B. 130"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Hubraum (cm³)</mat-label>
        <input
          matInput
          type="number"
          formControlName="cubicCapacity"
          required
          placeholder="z.B. 1598"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Anzahl Türen</mat-label>
        <mat-select formControlName="doorsId" required>
          @for (door of doors; track door.id) {
            <mat-option [value]="door.id">{{ door.quantity }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Anzahl Sitze</mat-label>
        <mat-select formControlName="seatsId" required>
          @for (seat of seats; track seat.id) {
            <mat-option [value]="seat.id">{{ seat.quantity }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Motor</mat-label>
        <mat-select formControlName="engineId" required>
          @for (engine of engines; track engine.id) {
            <mat-option [value]="engine.id">{{ engine.engineType }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Kraftstoffart</mat-label>
        <mat-select formControlName="fuelsId" required>
          @for (fuel of fuels; track fuel.id) {
            <mat-option [value]="fuel.id">{{ fuel.fuelType }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>

    <button mat-raised-button color="primary" type="submit">Speichern</button>
  </form>
</mat-card>

<mat-card class="sell-list-card">
  <mat-card-title>Deine Verkaufsfahrzeuge</mat-card-title>
  <mat-table [dataSource]="userVehicles" class="mat-elevation-z8">
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
      <mat-cell *matCellDef="let vehicle"> {{ vehicle.name }} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="price">
      <mat-header-cell *matHeaderCellDef> Preis </mat-header-cell>
      <mat-cell *matCellDef="let vehicle"> {{ vehicle.price }} CHF </mat-cell>
    </ng-container>

    <ng-container matColumnDef="year">
      <mat-header-cell *matHeaderCellDef> Jahr </mat-header-cell>
      <mat-cell *matCellDef="let vehicle"> {{ vehicle.year }} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef> Aktionen </mat-header-cell>
      <mat-cell *matCellDef="let vehicle">
        <button mat-button (click)="editVehicle(vehicle)">Bearbeiten</button>
        <button mat-button color="warn" (click)="deleteVehicle(vehicle.id)">Löschen</button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="['name', 'price', 'year', 'actions']"></mat-header-row>
    <mat-row *matRowDef="let row; columns: ['name', 'price', 'year', 'actions']"></mat-row>
  </mat-table>
</mat-card>
